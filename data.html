<!DOCTYPE html>
<html lang="en" data-root="https://acm.im/bristlecone/">
<head>
    <meta charset="UTF-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="Andrew Martin" name="author">
    <!-- Opengraph properties (https://ogp.me/) -->
    <meta property="og:site_name" content="bristlecone">
    <meta property="og:title" content="Loading and Saving Data" />
    <meta property="og:url" content="https://acm.im/bristlecone/data.html">
    <meta property="og:type" content="website" />
    <!-- Twitter cards (https://developer.twitter.com/en/docs/twitter-for-websites/cards/overview/summary-card-with-large-image) -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="https://acm.im/bristlecone/">
    <meta name="twitter:title" content="Loading and Saving Data">
    
    <title>Loading and Saving Data | bristlecone</title>
    <link href="https://fonts.googleapis.com" rel="preconnect">
    <link crossorigin href="https://fonts.gstatic.com" rel="preconnect">
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap" rel="stylesheet">
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
    <link href="https://acm.im/bristlecone/img/favicon.ico" rel="icon" sizes="32x32" type="image/png"/>
    <script type="application/javascript" src="https://acm.im/bristlecone/content/fsdocs-theme-set-dark.js"></script>
    <link href="https://acm.im/bristlecone/content/fsdocs-default.css" rel="stylesheet" type="text/css"/>
    <link href="https://acm.im/bristlecone/content/fsdocs-theme.css" rel="stylesheet" type="text/css"/>
    <script src="https://cdn.plot.ly/plotly-2.21.0.min.js"></script>
    
</head>
<body class="content">
<header>
    <div class="start">
        <div id="menu-toggle">
            <iconify-icon class="icon closed" height="22" icon="eva:menu-fill" width="22"></iconify-icon>
            <iconify-icon class="icon open" height="22" icon="mi:close" width="22"></iconify-icon>
            <input type="checkbox" name="mobile-menu" />
            <ul class="menu">
                <li class="nav-header">Links</li>
                <li class="nav-item"><a class="nav-link" href="https://github.com/AndrewIOM/bristlecone/blob/master/LICENSE">License</a>
                </li>
                <li class="nav-item"><a class="nav-link"
                                        href="https://github.com/AndrewIOM/bristlecone/blob/master/RELEASE_NOTES.MD">Release
                    Notes</a></li>
                <li class="nav-item"><a class="nav-link" href="https://github.com/AndrewIOM/bristlecone/">Source
                    Repository</a></li>
                <li class="nav-header ">
  The Bristlecone Language
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://acm.im/bristlecone/language.html">
    Writing Models
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://acm.im/bristlecone/model.html">
    Defining a Hypothesis (or Model System)
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://acm.im/bristlecone/estimation-engine.html">
    Defining a Model-Fitting Method (Estimation Engine)
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://acm.im/bristlecone/composing-models.html">
    Composing models into many hypotheses
  </a>
</li>             
<li class="nav-header active">
  Techniques
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://acm.im/bristlecone/model-fitting.html">
    Model Fitting
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://acm.im/bristlecone/model-selection.html">
    Model Selection
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://acm.im/bristlecone/workflow.html">
    Ensembles and Parallel Processing
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://acm.im/bristlecone/confidence-intervals.html">
    Calculating Confidence Intervals
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://acm.im/bristlecone/diagnostics.html">
    Diagnostics
  </a>
</li>             
<li class="nav-item active">
  <a class="nav-link" href="https://acm.im/bristlecone/data.html">
    Loading and Saving Data
  </a>
</li>             
<li class="nav-header ">
  Bristlecone.Dendro
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://acm.im/bristlecone/dendro.html">
    Dendroecology
  </a>
</li>             
<li class="nav-header ">
  Examples
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://acm.im/bristlecone/examples/predator-prey.html">
    Predator-Prey Dynamics
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://acm.im/bristlecone/examples/shrub-resource.html">
    Shrub response to a single limiting resource
  </a>
</li>             
<li class="nav-header ">
  Components
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://acm.im/bristlecone/optimisation.html">
    Optimisation
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://acm.im/bristlecone/integration.html">
    Integration
  </a>
</li>
                <li class="nav-header">
  API Reference
</li>             
<li class="nav-item">
  <a class="nav-link" href="https://acm.im/bristlecone/reference/index.html">
    All Namespaces
  </a>
</li>
            </ul>
        </div>
        <a href="https://acm.im/bristlecone/">
            <img alt="Header menu logo" src="https://acm.im/bristlecone//img/logo.png">
            <strong>bristlecone</strong>
        </a>
    </div>
    <div class="end">
        <a href="https://github.com/AndrewIOM/bristlecone/" target="_blank">
            <iconify-icon icon="uil:github" width="26" height="26"></iconify-icon>
        </a>
        <iconify-icon id="search-btn" icon="carbon:search" class="search" width="24" height="24"></iconify-icon>
        <fsdocs-theme-toggle></fsdocs-theme-toggle>
    </div>
</header>
<aside id="fsdocs-main-menu">
    <ul class="menu">
        <li class="nav-header">Links</li>
        <li class="nav-item"><a class="nav-link" href="https://github.com/AndrewIOM/bristlecone/blob/master/LICENSE">License</a>
        </li>
        <li class="nav-item"><a class="nav-link"
                                href="https://github.com/AndrewIOM/bristlecone/blob/master/RELEASE_NOTES.MD">Release
            Notes</a></li>
        <li class="nav-item"><a class="nav-link" href="https://github.com/AndrewIOM/bristlecone/">Source
            Repository</a></li>
        <li class="nav-header ">
  The Bristlecone Language
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://acm.im/bristlecone/language.html">
    Writing Models
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://acm.im/bristlecone/model.html">
    Defining a Hypothesis (or Model System)
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://acm.im/bristlecone/estimation-engine.html">
    Defining a Model-Fitting Method (Estimation Engine)
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://acm.im/bristlecone/composing-models.html">
    Composing models into many hypotheses
  </a>
</li>             
<li class="nav-header active">
  Techniques
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://acm.im/bristlecone/model-fitting.html">
    Model Fitting
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://acm.im/bristlecone/model-selection.html">
    Model Selection
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://acm.im/bristlecone/workflow.html">
    Ensembles and Parallel Processing
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://acm.im/bristlecone/confidence-intervals.html">
    Calculating Confidence Intervals
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://acm.im/bristlecone/diagnostics.html">
    Diagnostics
  </a>
</li>             
<li class="nav-item active">
  <a class="nav-link" href="https://acm.im/bristlecone/data.html">
    Loading and Saving Data
  </a>
</li>             
<li class="nav-header ">
  Bristlecone.Dendro
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://acm.im/bristlecone/dendro.html">
    Dendroecology
  </a>
</li>             
<li class="nav-header ">
  Examples
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://acm.im/bristlecone/examples/predator-prey.html">
    Predator-Prey Dynamics
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://acm.im/bristlecone/examples/shrub-resource.html">
    Shrub response to a single limiting resource
  </a>
</li>             
<li class="nav-header ">
  Components
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://acm.im/bristlecone/optimisation.html">
    Optimisation
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://acm.im/bristlecone/integration.html">
    Integration
  </a>
</li>
        <li class="nav-header">
  API Reference
</li>             
<li class="nav-item">
  <a class="nav-link" href="https://acm.im/bristlecone/reference/index.html">
    All Namespaces
  </a>
</li>
    </ul>
</aside>
<main>
    <div id="content">
        
<p><a href="https://acm.im/bristlecone//data.fsx"><img src="https://acm.im/bristlecone//img/badge-script.svg" alt="Script" /></a>&emsp;
<a href="https://acm.im/bristlecone//data.ipynb"><img src="https://acm.im/bristlecone//img/badge-notebook.svg" alt="Notebook" /></a></p>
<h1><a name="Loading-and-Saving-Data" class="anchor" href="#Loading-and-Saving-Data">Loading and Saving Data</a></h1>
<p>The <code>Bristlecone.Data</code> namespace includes methods for saving Bristlecone
results and diagnostics, and loading saved results for further analysis
at a later date.</p>
<h3><a name="Individual-estimations-results" class="anchor" href="#Individual-estimations-results">Individual estimations results</a></h3>
<h4><a name="The-estimation-result-itself" class="anchor" href="#The-estimation-result-itself">The estimation result itself</a></h4>
<p>Saving and loading estimation results is conducted as follows:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">open</span> <span onmouseout="hideTip(event, 'fs1', 1)" onmouseover="showTip(event, 'fs1', 1)" class="id">Bristlecone</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs1', 2)" onmouseover="showTip(event, 'fs1', 2)" class="m">Bristlecone</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs2', 3)" onmouseover="showTip(event, 'fs2', 3)" class="id">Data</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs1', 4)" onmouseover="showTip(event, 'fs1', 4)" class="m">Bristlecone</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs3', 5)" onmouseover="showTip(event, 'fs3', 5)" class="m">Language</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs4', 6)" onmouseover="showTip(event, 'fs4', 6)" class="id">resultsDirectory</span> <span class="o">=</span> <span class="s">&quot;/some/data/dir&quot;</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs5', 7)" onmouseover="showTip(event, 'fs5', 7)" class="id">thinTraceBy</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs6', 8)" onmouseover="showTip(event, 'fs6', 8)" class="uc">Some</span> <span class="n">1000</span> <span class="c">// Only trace every n iterations to save disk space</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs7', 9)" onmouseover="showTip(event, 'fs7', 9)" class="id">subject</span> <span class="o">=</span> <span class="s">&quot;Mosquito population&quot;</span> <span class="c">// The name of the &#39;subject&#39; of analysis</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs8', 10)" onmouseover="showTip(event, 'fs8', 10)" class="id">modelName</span> <span class="o">=</span> <span class="s">&quot;Logistic growth&quot;</span>

<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs9', 11)" onmouseover="showTip(event, 'fs9', 11)" class="fn">result</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs10', 12)" onmouseover="showTip(event, 'fs10', 12)" class="m">EstimationResult</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs11', 13)" onmouseover="showTip(event, 'fs11', 13)" class="id">saveAll</span> <span onmouseout="hideTip(event, 'fs4', 14)" onmouseover="showTip(event, 'fs4', 14)" class="id">resultsDirectory</span> <span onmouseout="hideTip(event, 'fs7', 15)" onmouseover="showTip(event, 'fs7', 15)" class="id">subject</span> <span onmouseout="hideTip(event, 'fs8', 16)" onmouseover="showTip(event, 'fs8', 16)" class="id">modelName</span> <span onmouseout="hideTip(event, 'fs5', 17)" onmouseover="showTip(event, 'fs5', 17)" class="id">thinTraceBy</span> <span onmouseout="hideTip(event, 'fs9', 18)" onmouseover="showTip(event, 'fs9', 18)" class="fn">result</span>
</code></pre>
<p>This save function outputs three files: one each for the maximum likelihood estimate,
a trace of the optimisation process, and the estimated vs
observed time series.</p>
<h4><a name="Other-statistics-and-estimates" class="anchor" href="#Other-statistics-and-estimates">Other statistics and estimates</a></h4>
<p>Some other Bristlecone functions have functions to load and save their outputs to CSV files.</p>
<p>Save confidence intervals:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs1', 19)" onmouseover="showTip(event, 'fs1', 19)" class="m">Bristlecone</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs2', 20)" onmouseover="showTip(event, 'fs2', 20)" class="id">Data</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs12', 21)" onmouseover="showTip(event, 'fs12', 21)" class="m">Confidence</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs13', 22)" onmouseover="showTip(event, 'fs13', 22)" class="id">save</span>
</code></pre>
<p>Save n-step ahead predictions made using <code>Bristlecone.oneStepAhead</code> and similar functions:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs1', 23)" onmouseover="showTip(event, 'fs1', 23)" class="m">Bristlecone</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs2', 24)" onmouseover="showTip(event, 'fs2', 24)" class="id">Data</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs14', 25)" onmouseover="showTip(event, 'fs14', 25)" class="m">NStepAhead</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs15', 26)" onmouseover="showTip(event, 'fs15', 26)" class="id">save</span>
</code></pre>
<h3><a name="Ensemble-level-results" class="anchor" href="#Ensemble-level-results">Ensemble-level results</a></h3>
<p>Some processes, for example model-selection, work across many model results. Bristlecone
includes loading and saving functions (to and from CSV files) for many of these procedures.</p>
<h4><a name="Model-selection" class="anchor" href="#Model-selection">Model-selection</a></h4>
<p>For model selection, you may calculate Akaike weights either from a sequence of <code>EstimationResult</code> (for simpler tasks)
or from a sequence of <code>ResultSet</code> (for working with many hypotheses):</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs16', 27)" onmouseover="showTip(event, 'fs16', 27)" class="fn">modelResults</span> <span onmouseout="hideTip(event, 'fs17', 28)" onmouseover="showTip(event, 'fs17', 28)" class="fn">subjectIds</span> <span onmouseout="hideTip(event, 'fs18', 29)" onmouseover="showTip(event, 'fs18', 29)" class="fn">hypothesisIds</span> <span class="k">-&gt;</span>
    <span onmouseout="hideTip(event, 'fs16', 30)" onmouseover="showTip(event, 'fs16', 30)" class="fn">modelResults</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs19', 31)" onmouseover="showTip(event, 'fs19', 31)" class="m">ModelSelection</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs20', 32)" onmouseover="showTip(event, 'fs20', 32)" class="m">Akaike</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs21', 33)" onmouseover="showTip(event, 'fs21', 33)" class="id">akaikeWeights</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs22', 34)" onmouseover="showTip(event, 'fs22', 34)" class="m">Seq</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs23', 35)" onmouseover="showTip(event, 'fs23', 35)" class="id">zip3</span> <span onmouseout="hideTip(event, 'fs17', 36)" onmouseover="showTip(event, 'fs17', 36)" class="fn">subjectIds</span> <span onmouseout="hideTip(event, 'fs18', 37)" onmouseover="showTip(event, 'fs18', 37)" class="fn">hypothesisIds</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs22', 38)" onmouseover="showTip(event, 'fs22', 38)" class="m">Seq</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs24', 39)" onmouseover="showTip(event, 'fs24', 39)" class="id">map</span> <span class="pn">(</span><span class="k">fun</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs25', 40)" onmouseover="showTip(event, 'fs25', 40)" class="fn">s</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs26', 41)" onmouseover="showTip(event, 'fs26', 41)" class="fn">h</span><span class="pn">,</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs27', 42)" onmouseover="showTip(event, 'fs27', 42)" class="id">a</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs28', 43)" onmouseover="showTip(event, 'fs28', 43)" class="fn">b</span><span class="pn">)</span><span class="pn">)</span> <span class="k">-&gt;</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs25', 44)" onmouseover="showTip(event, 'fs25', 44)" class="fn">s</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs26', 45)" onmouseover="showTip(event, 'fs26', 45)" class="fn">h</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs27', 46)" onmouseover="showTip(event, 'fs27', 46)" class="fn">a</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs28', 47)" onmouseover="showTip(event, 'fs28', 47)" class="fn">b</span><span class="pn">)</span><span class="pn">)</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs1', 48)" onmouseover="showTip(event, 'fs1', 48)" class="m">Bristlecone</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs2', 49)" onmouseover="showTip(event, 'fs2', 49)" class="id">Data</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs29', 50)" onmouseover="showTip(event, 'fs29', 50)" class="m">ModelSelection</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs30', 51)" onmouseover="showTip(event, 'fs30', 51)" class="id">save</span> <span class="s">&quot;/some/dir&quot;</span>

<span class="k">fun</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs31', 52)" onmouseover="showTip(event, 'fs31', 52)" class="fn">hypothesisResults</span><span class="pn">:</span> <span onmouseout="hideTip(event, 'fs19', 53)" onmouseover="showTip(event, 'fs19', 53)" class="m">ModelSelection</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs32', 54)" onmouseover="showTip(event, 'fs32', 54)" class="m">ResultSet</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs33', 55)" onmouseover="showTip(event, 'fs33', 55)" class="id">ResultSet</span><span class="pn">&lt;</span><span onmouseout="hideTip(event, 'fs34', 56)" onmouseover="showTip(event, 'fs34', 56)" class="rt">string</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs35', 57)" onmouseover="showTip(event, 'fs35', 57)" class="m">Hypotheses</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs36', 58)" onmouseover="showTip(event, 'fs36', 58)" class="id">Hypothesis</span><span class="pn">&gt;</span> <span onmouseout="hideTip(event, 'fs37', 59)" onmouseover="showTip(event, 'fs37', 59)" class="if">seq</span><span class="pn">)</span> <span class="k">-&gt;</span>
    <span onmouseout="hideTip(event, 'fs31', 60)" onmouseover="showTip(event, 'fs31', 60)" class="fn">hypothesisResults</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs19', 61)" onmouseover="showTip(event, 'fs19', 61)" class="m">ModelSelection</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs20', 62)" onmouseover="showTip(event, 'fs20', 62)" class="m">Akaike</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs38', 63)" onmouseover="showTip(event, 'fs38', 63)" class="id">akaikeWeightsForSet</span> <span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs39', 64)" onmouseover="showTip(event, 'fs39', 64)" class="fn">h</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs39', 65)" onmouseover="showTip(event, 'fs39', 65)" class="fn">h</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs40', 66)" onmouseover="showTip(event, 'fs40', 66)" class="id">ReferenceCode</span><span class="pn">)</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs1', 67)" onmouseover="showTip(event, 'fs1', 67)" class="m">Bristlecone</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs2', 68)" onmouseover="showTip(event, 'fs2', 68)" class="id">Data</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs29', 69)" onmouseover="showTip(event, 'fs29', 69)" class="m">ModelSelection</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs30', 70)" onmouseover="showTip(event, 'fs30', 70)" class="id">save</span> <span class="s">&quot;/some/dir&quot;</span>
</code></pre>
<h4><a name="Convergence-of-Monte-Carlo-based-optimisation-approaches" class="anchor" href="#Convergence-of-Monte-Carlo-based-optimisation-approaches">Convergence of Monte-Carlo based optimisation approaches</a></h4>
<p>You can assess the convergence of multiple 'chains' between MCMC or Monte-Carlo based
optimisation methods using the functions in the <code>Bristlecone.Diagnostics</code> namespace, such as
the per-parameter R-hat values based on the optimisation trace.</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Given a set of results on a per-subject and per-hypothesis basis:</span>
<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs41', 71)" onmouseover="showTip(event, 'fs41', 71)" class="fn">resultSet</span> <span class="k">-&gt;</span>
    <span onmouseout="hideTip(event, 'fs41', 72)" onmouseover="showTip(event, 'fs41', 72)" class="fn">resultSet</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs1', 73)" onmouseover="showTip(event, 'fs1', 73)" class="m">Bristlecone</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs42', 74)" onmouseover="showTip(event, 'fs42', 74)" class="m">Diagnostics</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs43', 75)" onmouseover="showTip(event, 'fs43', 75)" class="m">Convergence</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs44', 76)" onmouseover="showTip(event, 'fs44', 76)" class="id">gelmanRubin</span> <span class="n">10000</span> <span class="s">&quot;some subject&quot;</span> <span class="s">&quot;some hypothesis&quot;</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs45', 77)" onmouseover="showTip(event, 'fs45', 77)" class="m">Option</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs46', 78)" onmouseover="showTip(event, 'fs46', 78)" class="id">iter</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs1', 79)" onmouseover="showTip(event, 'fs1', 79)" class="m">Bristlecone</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs2', 80)" onmouseover="showTip(event, 'fs2', 80)" class="id">Data</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs47', 81)" onmouseover="showTip(event, 'fs47', 81)" class="m">Convergence</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs48', 82)" onmouseover="showTip(event, 'fs48', 82)" class="id">save</span> <span class="s">&quot;/some/dir&quot;</span><span class="pn">)</span>
</code></pre>
<h4><a name="Summarise-Root-Mean-Squared-Error-for-many-hypotheses-subjects" class="anchor" href="#Summarise-Root-Mean-Squared-Error-for-many-hypotheses-subjects">Summarise Root Mean Squared Error for many hypotheses / subjects</a></h4>
<p>Given individual n-step ahead predictions made using <code>Bristlecone.oneStepAhead</code>
and similar functions, you can save the resultant RMSE statistic (an indication
of model performance) in a summary table across all hypotheses and subjects:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs49', 83)" onmouseover="showTip(event, 'fs49', 83)" class="fn">nStepFits</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs1', 84)" onmouseover="showTip(event, 'fs1', 84)" class="m">Bristlecone</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs2', 85)" onmouseover="showTip(event, 'fs2', 85)" class="id">Data</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs14', 86)" onmouseover="showTip(event, 'fs14', 86)" class="m">NStepAhead</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs50', 87)" onmouseover="showTip(event, 'fs50', 87)" class="id">saveAllRMSE</span> <span class="s">&quot;/some/dir&quot;</span> <span onmouseout="hideTip(event, 'fs49', 88)" onmouseover="showTip(event, 'fs49', 88)" class="fn">nStepFits</span>
</code></pre>

        <div class="fsdocs-tip" id="fs1">Multiple items<br />module Bristlecone

from Bristlecone<br /><em>&lt;namespacedoc&gt;&lt;summary&gt;The core library of Bristlecone, containing model-fitting functions.&lt;/summary&gt;&lt;/namespacedoc&gt;<br />

 Main functionality of Bristlecone, including functions to scaffold
 `ModelSystem`s and for model-fitting (tests and real fits).
</em><br /><br />--------------------<br />namespace Bristlecone</div>
<div class="fsdocs-tip" id="fs2">namespace Bristlecone.Data</div>
<div class="fsdocs-tip" id="fs3">module Language

from Bristlecone<br /><em>&lt;summary&gt;
 An F# Domain Specific Language (DSL) for scripting with
 Bristlecone.
&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs4">val resultsDirectory: string</div>
<div class="fsdocs-tip" id="fs5">val thinTraceBy: int option</div>
<div class="fsdocs-tip" id="fs6">union case Option.Some: Value: &#39;T -&gt; Option&lt;&#39;T&gt;</div>
<div class="fsdocs-tip" id="fs7">val subject: string</div>
<div class="fsdocs-tip" id="fs8">val modelName: string</div>
<div class="fsdocs-tip" id="fs9">val result: ModelSystem.EstimationResult</div>
<div class="fsdocs-tip" id="fs10">module EstimationResult

from Bristlecone.Data</div>
<div class="fsdocs-tip" id="fs11">val saveAll: directory: string -&gt; subject: string -&gt; modelId: string -&gt; thinTraceBy: int option -&gt; result: ModelSystem.EstimationResult -&gt; unit<br /><em>&lt;summary&gt;Save the Maximum Likelihood Estimate, trace of the optimisation
 procedure, and time-series.&lt;/summary&gt;<br />&lt;param name=&quot;directory&quot;&gt;Relative or absolute directory to save files to&lt;/param&gt;<br />&lt;param name=&quot;subject&quot;&gt;An identifier for the subject of the test&lt;/param&gt;<br />&lt;param name=&quot;modelId&quot;&gt;An identifier for the model used&lt;/param&gt;<br />&lt;param name=&quot;thinTraceBy&quot;&gt;If Some, an integer representing the nth traces to keep from the optimisation trace.
 If None, does not thin the trace.&lt;/param&gt;<br />&lt;param name=&quot;result&quot;&gt;The estimation result to save&lt;/param&gt;</em></div>
<div class="fsdocs-tip" id="fs12">module Confidence

from Bristlecone.Data</div>
<div class="fsdocs-tip" id="fs13">val save: directory: string -&gt; subject: string -&gt; modelId: string -&gt; runId: System.Guid -&gt; result: CodedMap&lt;Confidence.ConfidenceInterval&gt; -&gt; unit</div>
<div class="fsdocs-tip" id="fs14">module NStepAhead

from Bristlecone.Data<br /><em>&lt;summary&gt;Loads and saves one-step-ahead and n-step-ahead prediction
 results into and out of simple CSV files&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs15">val save: directory: string -&gt; subjectId: string -&gt; modelId: string -&gt; analysisId: System.Guid -&gt; stepsAhead: int -&gt; result: CodedMap&lt;ModelSystem.FitSeries * Statistics.NStepStatistics&gt; -&gt; unit<br /><em>&lt;summary&gt;Save an individual n-step prediction (excluding statistics) for an
 individual subject and hypothesis / model.&lt;/summary&gt;<br />&lt;param name=&quot;directory&quot;&gt;The file directory to save to&lt;/param&gt;<br />&lt;param name=&quot;subjectId&quot;&gt;Subject ID&lt;/param&gt;<br />&lt;param name=&quot;modelId&quot;&gt;Model ID or Hypothesis ID&lt;/param&gt;<br />&lt;param name=&quot;analysisId&quot;&gt;The unique reference of the estimation result used to generate n-step predictions&lt;/param&gt;<br />&lt;param name=&quot;stepsAhead&quot;&gt;The number of time-steps ahead predicted&lt;/param&gt;<br />&lt;param name=&quot;result&quot;&gt;The n-step prediction from Bristlecone.oneStepAhead or similar&lt;/param&gt;</em></div>
<div class="fsdocs-tip" id="fs16">val modelResults: ModelSystem.EstimationResult seq</div>
<div class="fsdocs-tip" id="fs17">val subjectIds: string seq</div>
<div class="fsdocs-tip" id="fs18">val hypothesisIds: string seq</div>
<div class="fsdocs-tip" id="fs19">Multiple items<br />module ModelSelection

from Bristlecone.Data<br /><br />--------------------<br />module ModelSelection

from Bristlecone<br /><em>&lt;summary&gt;Contains tools for conducting Model Selection across
 individual subjects and hypotheses.&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs20">module Akaike

from Bristlecone.ModelSelection<br /><em>&lt;summary&gt;Functions for conducting Akaike Information Criterion (AIC).&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs21">val akaikeWeights: models: ModelSystem.EstimationResult seq -&gt; (ModelSystem.EstimationResult * ModelSelection.Akaike.AkaikeWeight) seq<br /><em>&lt;summary&gt;Akaike weights for a sequence of `EstimationResult`s.&lt;/summary&gt;<br />&lt;param name=&quot;models&quot;&gt;The input model results&lt;/param&gt;<br />&lt;returns&gt;An (EstimationResult * float) sequence of estimation results paired to their Akaike weights.&lt;/returns&gt;<br />&lt;exception name=&quot;ArgumentException&quot;&gt;Occurs when there are no observations within an estimation result.&lt;/exception&gt;</em></div>
<div class="fsdocs-tip" id="fs22">Multiple items<br />module Seq

from Bristlecone<br /><br />--------------------<br />module Seq

from Microsoft.FSharp.Collections</div>
<div class="fsdocs-tip" id="fs23">val zip3: source1: &#39;T1 seq -&gt; source2: &#39;T2 seq -&gt; source3: &#39;T3 seq -&gt; (&#39;T1 * &#39;T2 * &#39;T3) seq</div>
<div class="fsdocs-tip" id="fs24">val map: mapping: (&#39;T -&gt; &#39;U) -&gt; source: &#39;T seq -&gt; &#39;U seq</div>
<div class="fsdocs-tip" id="fs25">val s: string</div>
<div class="fsdocs-tip" id="fs26">val h: string</div>
<div class="fsdocs-tip" id="fs27">val a: ModelSystem.EstimationResult</div>
<div class="fsdocs-tip" id="fs28">val b: ModelSelection.Akaike.AkaikeWeight</div>
<div class="fsdocs-tip" id="fs29">module ModelSelection

from Bristlecone.Data</div>
<div class="fsdocs-tip" id="fs30">val save: directory: string -&gt; result: (string * string * ModelSystem.EstimationResult * ModelSelection.Akaike.AkaikeWeight) seq -&gt; unit</div>
<div class="fsdocs-tip" id="fs31">val hypothesisResults: ModelSelection.ResultSet.ResultSet&lt;string,Hypotheses.Hypothesis&gt; seq</div>
<div class="fsdocs-tip" id="fs32">module ResultSet

from Bristlecone.ModelSelection<br /><em>&lt;summary&gt;Organises multiple hypotheses and multiple subjects into distinct analysis groups.&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs33">type ResultSet&lt;&#39;subject,&#39;hypothesis&gt; =
  {
    Subject: &#39;subject
    Hypothesis: &#39;hypothesis
    BestResult: EstimationResult option
    AllResults: EstimationResult seq
  }<br /><em>&lt;summary&gt;A representation of all results for a particular subject and hypothesis&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs34">Multiple items<br />val string: value: &#39;T -&gt; string<br /><br />--------------------<br />type string = System.String</div>
<div class="fsdocs-tip" id="fs35">module Hypotheses

from Bristlecone.Language<br /><em>&lt;summary&gt;Types to represent a hypothesis, given that a hypothesis
 is a model system that contains some alternate formulations of certain
 components.&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs36">Multiple items<br />union case Hypotheses.Hypothesis.Hypothesis: ModelSystem.ModelSystem * Hypotheses.ComponentName list -&gt; Hypotheses.Hypothesis<br /><br />--------------------<br />type Hypothesis =
  | Hypothesis of ModelSystem * ComponentName list
  member Components: ComponentName list
  member Model: ModelSystem
  member ReferenceCode: string<br /><em>&lt;summary&gt;A hypothesis consists of a model system and the names of the
 swappable components within it, alongside the name of their current implementation.&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs37">Multiple items<br />val seq: sequence: &#39;T seq -&gt; &#39;T seq<br /><br />--------------------<br />type &#39;T seq = System.Collections.Generic.IEnumerable&lt;&#39;T&gt;</div>
<div class="fsdocs-tip" id="fs38">val akaikeWeightsForSet: getRefCode: (&#39;a -&gt; &#39;b) -&gt; set: ModelSelection.ResultSet.ResultSet&lt;&#39;c,&#39;a&gt; seq -&gt; (&#39;c * &#39;b * ModelSystem.EstimationResult * ModelSelection.Akaike.AkaikeWeight) list (requires equality)<br /><em>&lt;summary&gt;Akaike weights for a result set.&lt;/summary&gt;<br />&lt;param name=&quot;getRefCode&quot;&gt;A function that gets a short reference code from a hypothesis.&lt;/param&gt;<br />&lt;param name=&quot;set&quot;&gt;A sequence of `ResultSet`s, within each the 1 .. many results of a particular subject * hypothesis combination.&lt;/param&gt;<br />&lt;returns&gt;An `(EstimationResult * float) seq` of estimation results paired to their Akaike weights.&lt;/returns&gt;<br />&lt;exception cref=&quot;ArgumentException&quot;&gt;Occurs when there are no observations within an estimation result.&lt;/exception&gt;</em></div>
<div class="fsdocs-tip" id="fs39">val h: Hypotheses.Hypothesis</div>
<div class="fsdocs-tip" id="fs40">property Hypotheses.Hypothesis.ReferenceCode: string with get<br /><em>&lt;summary&gt;Compiles a reference code that may be used to identify (although not necessarily uniquely) this hypothesis&lt;/summary&gt;<br />&lt;returns&gt;A string in the format XX_XXX_YY_YYY... where XX_XXX is a singe component with XX the component and XXX the implementation.&lt;/returns&gt;</em></div>
<div class="fsdocs-tip" id="fs41">val resultSet: ModelSelection.ResultSet.ResultSet&lt;&#39;a,&#39;b&gt;</div>
<div class="fsdocs-tip" id="fs42">module Diagnostics

from Bristlecone<br /><em>&lt;summary&gt;Diagnostic techniques for determining the suitability of
 results obtained with Bristlecone.&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs43">module Convergence

from Bristlecone.Diagnostics<br /><em>&lt;summary&gt;Convergence diagnostics for monte-carlo markov chain (MCMC) analyses.&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs44">val gelmanRubin: nMostRecent: int -&gt; subjectId: string -&gt; hypothesisId: string -&gt; result: ModelSelection.ResultSet.ResultSet&lt;&#39;subject,&#39;hypothesis&gt; -&gt; Diagnostics.Convergence.ConvergenceStatistic seq option<br /><em>&lt;summary&gt;Calculate the Gelman-Rubin statistic for each parameter in the given
 `ResultSet`. The statistic tends downwards to one, with one indicating
 perfect convergence between all chains.&lt;/summary&gt;<br />&lt;param name=&quot;nMostRecent&quot;&gt;How many recent iterations to use from the trace.&lt;/param&gt;<br />&lt;param name=&quot;subjectId&quot;&gt;The subject identifier&lt;/param&gt;<br />&lt;param name=&quot;hypothesisId&quot;&gt;The hypothesis identifier&lt;/param&gt;<br />&lt;param name=&quot;result&quot;&gt;A result set (of 1 .. many results) for a particular subject and hypothesis&lt;/param&gt;<br />&lt;returns&gt;If more than one replicate, the R-hat convergence statistic across replicates&lt;/returns&gt;</em></div>
<div class="fsdocs-tip" id="fs45">module Option

from Microsoft.FSharp.Core</div>
<div class="fsdocs-tip" id="fs46">val iter: action: (&#39;T -&gt; unit) -&gt; option: &#39;T option -&gt; unit</div>
<div class="fsdocs-tip" id="fs47">module Convergence

from Bristlecone.Data</div>
<div class="fsdocs-tip" id="fs48">val save: directory: string -&gt; result: Diagnostics.Convergence.ConvergenceStatistic seq -&gt; unit</div>
<div class="fsdocs-tip" id="fs49">val nStepFits: (string * string * CodedMap&lt;ModelSystem.FitSeries * Statistics.NStepStatistics&gt;) seq</div>
<div class="fsdocs-tip" id="fs50">val saveAllRMSE: directory: string -&gt; results: (string * string * CodedMap&lt;ModelSystem.FitSeries * Statistics.NStepStatistics&gt;) seq -&gt; unit<br /><em>&lt;summary&gt;Saves a full ensemble overview of the root mean squared error
 of n-step ahead predictions.&lt;/summary&gt;<br />&lt;param name=&quot;directory&quot;&gt;The file directory to save to&lt;/param&gt;<br />&lt;param name=&quot;results&quot;&gt;A sequence of subjectID * hypothesisID * n-step result&lt;/param&gt;</em></div>

    </div>
</main>
<aside id="fsdocs-page-menu">
    <p id="on-this-page">On this page</p>
    <ul>
  <li class="level-1">
    <a href="#Loading-and-Saving-Data">
      Loading and Saving Data
    </a>
  </li>
  <li class="level-3">
    <a href="#Individual-estimations-results">
      Individual estimations results
    </a>
  </li>
  <li class="level-4">
    <a href="#The-estimation-result-itself">
      The estimation result itself
    </a>
  </li>
  <li class="level-4">
    <a href="#Other-statistics-and-estimates">
      Other statistics and estimates
    </a>
  </li>
  <li class="level-3">
    <a href="#Ensemble-level-results">
      Ensemble-level results
    </a>
  </li>
  <li class="level-4">
    <a href="#Model-selection">
      Model-selection
    </a>
  </li>
  <li class="level-4">
    <a href="#Convergence-of-Monte-Carlo-based-optimisation-approaches">
      Convergence of Monte-Carlo based optimisation approaches
    </a>
  </li>
  <li class="level-4">
    <a href="#Summarise-Root-Mean-Squared-Error-for-many-hypotheses-subjects">
      Summarise Root Mean Squared Error for many hypotheses / subjects
    </a>
  </li>
</ul>
</aside>
<dialog>
    <input type="search" placeholder="Search docs" />
    <div class="results">
        <ul></ul>
        <p class="empty">Type something to start searching.</p>
    </div>
</dialog>
<script type="module" src="https://acm.im/bristlecone/content/fsdocs-tips.js"></script>
<script type="module" src="https://acm.im/bristlecone/content/fsdocs-theme-toggle.js"></script>
<script type="module" src="https://acm.im/bristlecone/content/fsdocs-theme.js"></script>
<script type="module" src="https://acm.im/bristlecone/content/fsdocs-search.js"></script>

</body>
</html>